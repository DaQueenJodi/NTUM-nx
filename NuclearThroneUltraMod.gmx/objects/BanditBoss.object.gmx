<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprBanditBossIdle</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-2</depth>
  <persistent>0</persistent>
  <parentName>enemy</parentName>
  <maskName>mskBanditBoss</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>raddrop = 30
maxhealth = 100
meleedamage = 0
size = 3

event_inherited()

if instance_exists(Player){
my_health=round( (1+(Player.loops*0.2))*my_health )//bandit loop 1: 1.1*4= 5(rounded up)
maxhealth=my_health;
}

spr_idle = sprBanditBossIdle
spr_walk = sprBanditBossWalk
spr_hurt = sprBanditBossHurt
spr_dead = sprBanditBossDead
spr_fire = sprBanditBossFire


snd_hurt = sndBigBanditHit
snd_dead = sndBigBanditDie

//behavior
ammo = 10
walk = 0
shot = 0
chargewait = 2
charge = 0
gunangle = random(360)
alarm[1] = 1
intro = 0
wkick = 0

scrTarget()
if target != -1
gunangle = point_direction(x,y,target.x,target.y)

sndhalfhp = 0
sndtaunt = 0
tauntdelay = 0

oasis=false;

cam=true

with BanditBoss
{
if id!=other.id
other.cam=false;
}

if cam
instance_create(x,y,DramaCamera);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with MusCont
{
//optimise sound_discard(song)
//optimise sound_discard(amb)

audio_stop_sound(song);
song = sndBossWin
snd_play(song)
//snd_loop(amb)

audio_master_gain(max(0,sqrt(UberCont.opt_sfxvol)))

audio_sound_gain(song,max(0,sqrt(UberCont.opt_musvol)),0);

audio_sound_gain(amb,max(0,sqrt(UberCont.opt_ambvol)),0);

//audio_sound_gain(sndBossWin,max(0,sqrt(UberCont.opt_musvol)),0);

}
repeat(2)
scrDrop(200,0)

//drop oopsgun?
if(random(50)&lt;1){
with instance_create(x,y,WepPickup)
{
scrWeapons()
wep = 69
name = wep_name[69]
ammo = 0
type = wep_type[69]
curse = 0
sprite_index = wep_sprt[69]
}}
event_inherited()

if oasis
{
instance_create(x,y,Portal);
with Player
oasis=true;
}

if instance_exists(Marker)
{
    if place_meeting(x,y,Marker)
    {
        with Player
        {
        
        bigbanditmarked=true;
        
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if target&gt;0
gunangle = point_direction(x,y,target.x,target.y);

if alarm[2]&gt;0
alarm[6]=5;//Aim again
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
spr_idle = sprBanditBossIdle
spr_walk = sprBanditBossWalk
spr_hurt = sprBanditBossHurt
spr_dead = sprBanditBossDead
spr_fire = sprBanditBossFire
charge = 0

alarm[1] = 10+random(30)

if intro = 0
{
if !instance_exists(BanditBoss)
instance_create(x,y,DramaCamera)

with BanditBoss
intro=1;

intro = 1
if instance_exists(Player)
{
if Player.loops&gt;0
alarm[1]=10;
else
alarm[1] = 60;
}
else
alarm[1] = 60
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if charge = 0
{charge = 1
meleedamage = 10
alarm[4] = 20
if intro = 0
alarm[4] = 5

snd_play(sndBigBanditMelee)
scrTarget()

if target &gt; 0
{
gunangle = point_direction(x,y,target.x,target.y)
motion_add(gunangle,10)
}
}
else
{
meleedamage = 0
charge = -1
alarm[5] = 10
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//CHARGING FUN

walk = 0

spr_idle = sprBanditBossTell
spr_walk = sprBanditBossDash
spr_hurt = sprBanditBossHurt
spr_dead = sprBanditBossDead
spr_fire = sprBanditBossStop

if gunangle &gt; 90 and gunangle &lt; 270
right = -1
else
right = 1

snd_play(sndBigBanditMeleeStart)

alarm[4] = 15
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if ammo &gt; 0
{
if ammo= 10
snd_play(sndBigBanditShootLaugh)

shot = 1
ammo -= 1
alarm[2] = 4
sprite_index = spr_fire
walk = 0
motion_add(gunangle+180,1)
wkick = 5
snd_play(sndEnemyFire)
if instance_exists(Player)
{
if Player.loops&gt;0
{
with instance_create(x,y,EnemyBullet1)
{
motion_add(other.gunangle+random(30)-15,10)
image_angle = direction
team = other.team
}
}
else
{//PRELOOP
with instance_create(x,y,EnemyBullet1)
{
motion_add(other.gunangle+random(30)-15,8)
image_angle = direction
team = other.team
}
}
}
else
{//PRELOOP
with instance_create(x,y,EnemyBullet1)
{
motion_add(other.gunangle+random(30)-15,8)
image_angle = direction
team = other.team
}
}

}
else
{

snd_play(sndBigBanditStopShoot)
sprite_index = spr_idle
if instance_exists(Player)
{
    if Player.loops&gt;0{
    alarm[1] = 20+random(10)}
    else{
    alarm[1] = 60+random(10)}
}
else{
alarm[1] = 60+random(10)}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(Player)
{
if Player.loops&gt;0
{

//POST LOOP
alarm[1] = 10+random(30)//30+random(60)

meleedamage = 0

scrTarget()
if target &gt; 0
{
if point_distance(x,y,target.x,target.y) &lt; 240 or intro = 0
{
if collision_line(x,y,target.x,target.y,Wall,0,0) &lt; 0 and point_distance(x,y,target.x,target.y) &gt; 48 and intro = 1
{
if random(3) &lt; 2
{
snd_play(sndBigBanditStartShoot)
ammo = 10
alarm[6] = 5//alarm[2]
alarm[2] = 1
gunangle = point_direction(x,y,target.x,target.y)
alarm[1] = 60+random(10)//70+random(5)
}
}
else if shot = 1 or my_health &lt; maxhealth or intro = 0
{
//CHARGE HERE
chargewait += 1
if point_distance(x,y,target.x,target.y) &lt; 96
chargewait += 1
if chargewait &gt;= 2 or intro = 0
{
alarm[3] = 1
alarm[1] = -1
chargewait = 0
}
}
}
direction = point_direction(target.x,target.y,x,y)+random(180)-90
speed = 0.4
walk = 10+random(10)
if point_distance(x,y,target.x,target.y) &gt; 64
{
walk = 40
direction = point_direction(target.x,target.y,x,y)+random(90)-45
}

if target.x &lt; x
right = -1
else if target.x &gt; x
right = 1
}
else if random(5) &lt; 1
{
motion_add(random(360),0.4)
walk = 10+random(10)
alarm[1] = walk+10+random(30)
if hspeed &gt; 0
right = 1
else if hspeed &lt; 0
right = -1
}


}
else{

//PRE LOOP
alarm[1] = 30+random(60)

meleedamage = 0

scrTarget()
if target &gt; 0
{
if point_distance(x,y,target.x,target.y) &lt; 240 or intro = 0
{
if collision_line(x,y,target.x,target.y,Wall,0,0) &lt; 0 and point_distance(x,y,target.x,target.y) &gt; 48 and intro = 1
{
if random(3) &lt; 2
{
snd_play(sndBigBanditStartShoot)
ammo = 10
alarm[2] = 1
gunangle = point_direction(x,y,target.x,target.y)
alarm[1] = 70+random(5)
}
}
else if shot = 1 or my_health &lt; maxhealth or intro = 0
{
//CHARGE HERE
chargewait += 1
if point_distance(x,y,target.x,target.y) &lt; 96
chargewait += 1
if chargewait &gt;= 2 or intro = 0
{
alarm[3] = 1
alarm[1] = -1
chargewait = 0
}
}
}
direction = point_direction(target.x,target.y,x,y)+random(180)-90
speed = 0.4
walk = 10+random(10)
if point_distance(x,y,target.x,target.y) &gt; 64
{
walk = 40
direction = point_direction(target.x,target.y,x,y)+random(90)-45
}

if target.x &lt; x
right = -1
else if target.x &gt; x
right = 1
}
else if random(5) &lt; 1
{
motion_add(random(360),0.4)
walk = 10+random(10)
alarm[1] = walk+10+random(30)
if hspeed &gt; 0
right = 1
else if hspeed &lt; 0
right = -1
}

}


}
else{

//PRE LOOP
alarm[1] = 30+random(60)

meleedamage = 0

scrTarget()
if target &gt; 0
{
if point_distance(x,y,target.x,target.y) &lt; 240 or intro = 0
{
if collision_line(x,y,target.x,target.y,Wall,0,0) &lt; 0 and point_distance(x,y,target.x,target.y) &gt; 48 and intro = 1
{
if random(3) &lt; 2
{
snd_play(sndBigBanditStartShoot)
ammo = 10
alarm[2] = 1
gunangle = point_direction(x,y,target.x,target.y)
alarm[1] = 70+random(5)
}
}
else if shot = 1 or my_health &lt; maxhealth or intro = 0
{
//CHARGE HERE
chargewait += 1
if point_distance(x,y,target.x,target.y) &lt; 96
chargewait += 1
if chargewait &gt;= 2 or intro = 0
{
alarm[3] = 1
alarm[1] = -1
chargewait = 0
}
}
}
direction = point_direction(target.x,target.y,x,y)+random(180)-90
speed = 0.4
walk = 10+random(10)
if point_distance(x,y,target.x,target.y) &gt; 64
{
walk = 40
direction = point_direction(target.x,target.y,x,y)+random(90)-45
}

if target.x &lt; x
right = -1
else if target.x &gt; x
right = 1
}
else if random(5) &lt; 1
{
motion_add(random(360),0.4)
walk = 10+random(10)
alarm[1] = walk+10+random(30)
if hspeed &gt; 0
right = 1
else if hspeed &lt; 0
right = -1
}

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited()

if charge = 1
{
instance_create(x+random(8)-4,y+4+random(4),Dust)
motion_add(direction,0.5)
motion_add(gunangle,2)
if speed &gt; 5
speed = 5
}
else
{
if walk &gt; 0
{
walk -= 1
motion_add(direction,2)
motion_add(gunangle,1)
}
else if charge = -1
{
with Bandit
direction = point_direction(x,y,other.x,other.y)
sprite_index = spr_fire
}

if speed &gt; 3
speed = 3
}

if my_health &lt; maxhealth/2 and sndhalfhp = 0
{
snd_play(sndBigBanditHalfHP)
sndhalfhp = 1
}

if !instance_exists(Player) and sndtaunt = 0
{
tauntdelay += 1
if tauntdelay &gt; 50
{
snd_play(sndBigBanditTaunt)
sndtaunt = 1
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="Wall">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
if charge &gt; 0 or intro = 0
{
with other
{
instance_destroy()
instance_create(x,y,FloorExplo)
}
}
else
move_bounce_solid(true)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(Drama)
{
with BanditBoss
{
draw_sprite_ext(sprite_index,-1,x,y,right,1,0,c_white,1)
draw_sprite_ext(sprBanditBossGun,-1,x-sin((gunangle/180)*pi)*8,y,1,right,gunangle,c_white,1)
gunangle += 34
image_index += 0.4
}
}
else
{if gunangle &lt;= 180
draw_sprite_ext(sprBanditBossGun,-1,x+lengthdir_x(-wkick,gunangle),y+lengthdir_y(-wkick,gunangle),1,right,gunangle,c_white,1)
draw_sprite_ext(sprite_index,-1,x,y,right,1,0,c_white,1)
if gunangle &gt; 180
draw_sprite_ext(sprBanditBossGun,-1,x+lengthdir_x(-wkick,gunangle),y+lengthdir_y(-wkick,gunangle),1,right,gunangle,c_white,1)}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
